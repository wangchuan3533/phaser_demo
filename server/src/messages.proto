enum MessageType {
  JOIN_ROOM_REQ = 1;
  JOIN_ROOM_RES = 2;
  
  CHECKPOINT_REQ = 3;
  CHECKPOINT_RES = 4;
  
  UPDATE_NTF = 100;
}

message Entity {
  required uint32 id = 1;
  required int32 src = 2;
  required int32 dst = 3;
  required uint32 offset = 4;
}

message CheckpointReq {
  required uint32 id = 1;
  required int32 src = 2;
  required int32 dst = 3;
  required uint32 offset = 4;
  required uint32 ts = 5;
}

message CheckpointRes {
  required uint32 ret = 1;
  required uint32 ts = 2;
}

message JoinRoomReq {
  required uint32 room_id = 1;
  required uint32 ts = 2;
}

message JoinRoomRes {
  required uint32 room_id = 1;
  required uint32 player_id = 2;
  required Entity entity = 3;
}

message UpdateNtf {
  repeated Entity entities = 1;
}

message Message {
  required MessageType type = 1;
  required bytes data = 2;
}
